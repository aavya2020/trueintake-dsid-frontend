
<!DOCTYPE html>
<html>
<head>
    <title>TrueIntake AI - DSID Predictor</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body style="font-family: Arial, sans-serif; max-width: 600px; margin: 40px auto;">
    <h1>TrueIntake AI</h1>
    <h2>Predict Actual Nutrient Content (DSID)</h2>

    <form id="predictForm">
        <label for="nutrient">Nutrient Name:</label><br>
        <input type="text" id="nutrient" name="nutrient" required><br><br>

        <label for="labelClaim">Label Claim (Amount):</label><br>
        <input type="number" id="labelClaim" name="labelClaim" step="any" required><br><br>

        <label for="ageGroup">Age Group:</label><br>
        <select id="ageGroup" name="ageGroup" required>
            <option value="Adult">Adult</option>
            <option value="Children 4+">Children 4+</option>
            <option value="Children 1-4">Children 1â€“4</option>
        </select><br><br>

        <button type="submit">Predict</button>
    </form>

    <h3 id="result" style="margin-top: 30px;"></h3>

    <script>
        const form = document.getElementById("predictForm");
        const resultDiv = document.getElementById("result");

        form.onsubmit = async function(e) {
            e.preventDefault();
            const nutrient = document.getElementById("nutrient").value;
            const labelClaim = document.getElementById("labelClaim").value;
            const ageGroup = document.getElementById("ageGroup").value;

            const response = await fetch(`https://trueintake-dsid-backend.onrender.com/predict?nutrient=${encodeURIComponent(nutrient)}&label_claim=${encodeURIComponent(labelClaim)}&age_group=${encodeURIComponent(ageGroup)}`);
            const data = await response.json();

            if (data.predicted_measured_amount !== undefined) {
                resultDiv.innerHTML = `<strong>Predicted Measured Amount:</strong> ${data.predicted_measured_amount}`;
            } else {
                resultDiv.innerHTML = `<strong>Error:</strong> ${data.error || "Unknown error occurred"}`;
            }
        };
    </script>
</body>
</html>
